<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>剪贴板历史</title>
  <style>
    :root{
      --mt-bg:#0f1113; --mt-fg:#e6e7ea; --mt-border:#3a3b41; --mt-panel:#2b2d31;
      --mt-scrollbar-track:#1c1e22; --mt-scrollbar-thumb:#3a3b41; --mt-scrollbar-thumb-hover:#4a4b51;
      --mt-tooltip-bg:#1c1f24; --mt-tooltip-fg:#e6e7ea; --mt-tooltip-border:#3a3b41; --mt-shadow:0 8px 24px rgba(0,0,0,0.45);
    }
    :root[data-theme="light"]{
      --mt-bg:#ffffff; --mt-panel:#ffffff; --mt-fg:#333333; --mt-border:#e5e7eb;
      --mt-scrollbar-track:#f3f4f6; --mt-scrollbar-thumb:#d1d5db; --mt-scrollbar-thumb-hover:#9ca3af;
      --mt-tooltip-bg:#ffffff; --mt-tooltip-fg:#333333; --mt-tooltip-border:#e5e7eb; --mt-shadow:0 8px 24px rgba(0,0,0,0.12);
    }
    * { box-sizing: border-box; }
    html, body { overflow-x: hidden; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; display: flex; height: 100vh; background: var(--mt-bg); color: var(--mt-fg); }
    .panel { flex: 1; display: flex; flex-direction: column; background: var(--mt-panel); }
    .toolbar { padding: 10px; border-bottom: 1px solid var(--mt-border); display: flex; gap: 8px; }
    .toolbar input { flex: 1; min-width: 0; padding: 8px; font-size: 14px; background: transparent; color: var(--mt-fg); border: 1px solid var(--mt-border); border-radius: 6px; }
    .list { flex: 1; overflow-y: auto; overflow-x: hidden; }
    .item { padding: 10px; border-bottom: 1px solid var(--mt-border); display: grid; grid-template-columns: 48px 1fr auto; gap: 8px; align-items: center; overflow: hidden; }
    .item pre { margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; min-width: 0; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 12px; color: var(--mt-fg); }
    .type { font-size: 12px; color: #888; text-align: center; }
    .actions { display: flex; gap: 6px; }
    .btn { padding: 6px 10px; font-size: 12px; border: 1px solid var(--mt-border); border-radius: 6px; background: transparent; color: var(--mt-fg); cursor: pointer; }
    .btn:hover { background: rgba(255,255,255,0.06); }
    .empty { color: #888; padding: 16px; }

    /* 全局滚动条（纵向/横向）主题适配 */
    ::-webkit-scrollbar { width: 10px; height: 10px; }
    ::-webkit-scrollbar-track { background: var(--mt-scrollbar-track); }
    ::-webkit-scrollbar-thumb { background: var(--mt-scrollbar-thumb); border-radius: 6px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--mt-scrollbar-thumb-hover); }
    ::-webkit-scrollbar-corner { background: var(--mt-panel); }

    /* 悬浮全文 tooltip */
    .tooltip { position: fixed; z-index: 9999; max-width: 70vw; max-height: 60vh; overflow: auto; padding: 10px 12px; border-radius: 8px; border: 1px solid var(--mt-tooltip-border); background: var(--mt-tooltip-bg); color: var(--mt-tooltip-fg); box-shadow: var(--mt-shadow); font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 12px; white-space: pre-wrap; word-break: break-word; visibility: hidden; opacity: 0; transition: opacity .08s ease; }
    .tooltip.show { visibility: visible; opacity: 1; }
  </style>
  <script defer src="script.js"></script>
  <script>
    (async function(){
      function applyTheme(effective){
        const root = document.documentElement;
        if (effective === 'dark') {
          root.setAttribute('data-theme', '');
        } else {
          root.setAttribute('data-theme', 'light');
        }
      }
      try {
        const themeInfo = await window.MT.invoke('ui.getTheme');
        const eff = (themeInfo && themeInfo.effective) || (themeInfo && themeInfo.data && themeInfo.data.effective) || 'light';
        applyTheme(eff);
      } catch {}
      window.addEventListener('mt-theme-change', (ev)=>{
        try { applyTheme((ev && ev.detail && ev.detail.effective) || 'light'); } catch {}
      });
    })();
  </script>
</head>
<body>
  <div class="panel">
    <div class="toolbar">
      <input id="q" placeholder="搜索剪贴板历史..." />
      <button id="refresh" class="btn">刷新</button>
      <button id="clear" class="btn">清空</button>
    </div>
    <div id="list" class="list"></div>
  </div>
</body>
</html>


